<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <META http-equiv="Content-Style-Type" content="text/css">
        <title>Lab03 - Capacitacion</title>
        <link rel="stylesheet" href="/css/css.css" />
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp" crossorigin="anonymous">
        
    </head>
    <body>

        <div class="container mt-4" >
            <br>
            <h2>Matrícula</h2>
            <div class="progress">
                <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
            <hr class="hr" />
            <div class="row justify-content-start">
                <div class="col-md-4">
                    <br>
            
              <form id="regiration_form" novalidate action="/action"  method="post">
              <fieldset>
                
                <h3>Paso 1: Seleccione el curso a incribirse</h3>
                <br>
                <div class="form-group">
                    <select class="form-select form-select-sm mb-3" aria-label=".form-select-lg example" id="lenguajes">
                        <option value="php" selected >PHP</option>
                        <option value="java" >Java</option>
                        <option value="net">NET</option>
                      </select>
                </div>
                <br>
                <input type="button" name="password" class="next btn btn-primary primary-color" value="Next" />
              </fieldset>
              <fieldset>
                <h2> Paso 2: Elige el módulo</h2>
                <br>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="module" value="Básico" id="basico" checked>
                    <label class="form-check-label" for="basico">
                    Básico
                    </label>
            </div>
                <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="module" value="Intermedio" id="intermedio">
                        <label class="form-check-label" for="intermedio">
                        Intermedio
                        </label>
                    </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="module" value="Avanzado" id="avanzado">
                    <label class="form-check-label" for="avanzado">
                    Avanzado
                    </label>
            </div>
                <br>
                <input type="button" name="previous" class="previous btn btn-secondary" value="Previous" />
                <input type="button" name="next" class="next btn btn-primary primary-color" value="Next" />
              </fieldset>
              <fieldset>
                <h2>Paso 3: Método de pago</h2>
                <br>
                <div class="form-check">
                    <input type="radio" class="form-check-input" id="tarjeta" value="Tarjeta" name="pagos" required>
                    <label class="form-check-label" for="validationFormCheck2">Tarjeta de crédito</label>
                  </div>
                  <div class="form-check mb-3">
                    <input type="radio" class="form-check-input" id="efectivo" value="Efectivo" name="pagos" required>
                    <label class="form-check-label" for="validationFormCheck3">Pagar en efectivo</label>
                  </div>
                <br>
                <input type="button" name="previous" class="previous btn btn-secondary" value="Previous" />
                <input type="button" name="next" onclick="verinfo()" class="next btn btn-primary primary-color" value="Next" />
              </fieldset>
              <fieldset>
                <h2>Datos de la matrícula</h2>
                <br>
                    <p>Curso:</p>
                    <input class="form-control" id="cursos" type="text" readonly="readonly"/>
                    <br>
                    <p>Modulos escogidos:</p>
                    <input class="form-control" id="moduloss" type="text" readonly="readonly"/>
                    <br>
                    <p>Metodo de pago:</p>
                    <input class="form-control" id="metodos" type="text" readonly="readonly"/>


                <br>
                    <label>Monto a pagar:</label>
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                          <span  class="input-group-text rounded-left" id="basic-addon1">S/.</span>
                        </div>
                        <input id="total" type="text" class="form-control" placeholder="Username" readonly="readonly" >
                      </div>
                    <p class="px-2" style="color: #777777;" id="descuento"></p>
              </fieldset>
              </form>
            </div>
                
            </div>
        </div>

            
 
        
    </body>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script>
        $(document).ready(function(){
        var current = 1,current_step,next_step,steps;
        steps = $("fieldset").length;
        $(".next").click(function(){
            current_step = $(this).parent();
            next_step = $(this).parent().next();
            next_step.show();
            current_step.hide();
            setProgressBar(++current);
        });
        $(".previous").click(function(){
            current_step = $(this).parent();
            next_step = $(this).parent().prev();
            next_step.show();
            current_step.hide();
            setProgressBar(--current);
        });
        setProgressBar(current);
        // Change progress bar action
        function setProgressBar(curStep){
            var percent = parseFloat(100 / steps) * curStep;
            percent = percent.toFixed();
            $(".progress-bar")
            .css("width",percent+"%")
            .html(percent+"%");   
        }
        });

        function verinfo(){
            var monto_php = 800.0;
            var monto_java = 1200.0;
            var monto_net = 1500.0;
            var monto_leng = 0.0;
            var radio_selected = $('input[name="pagos"]:checked').val()
            var current = 1,current_step,next_step,steps;
            steps = $("fieldset").length;
            if(radio_selected == null){
                setProgressBar(--current);
            } else{
                
            }
            setProgressBar(current);

            function setProgressBar(curStep){
                var percent = parseFloat(100 / steps) * curStep;
                percent = percent.toFixed();
                $(".progress-bar")
                .css("width",percent+"%")
                .html(percent+"%");   
            }

            

            var selectedLanguage = new Array();
            $('input[name="module"]:checked').each(function() {
                selectedLanguage.push(this.value);
            });
               
            var lenguaje = $('select option').filter(':selected').text();
            console.log('Selected option value ' + $('select option').filter(':selected').val());
            $('select').on('change', function () {
                //ways to retrieve selected option and text outside handler
                lenguaje = $('select option').filter(':selected').text();
            });
            if (lenguaje == "PHP"){
                monto_leng = 800.0
                console.log("con php se paga S/.800") 
            } else if (lenguaje == "Java"){
                monto_leng = 1200.0
                console.log("con php se paga S/.1200") 
            } else if (lenguaje == "NET"){
                monto_leng = 1500.0
                console.log("con php se paga S/.1500") 
            }
            $("#cursos").val(lenguaje);
            
                if(selectedLanguage.length == 1){
                    $("#moduloss").val(selectedLanguage);
                } else if(selectedLanguage.length == 2){
                    for(i in selectedLanguage){
                        var uno = selectedLanguage[0]
                        var dos = selectedLanguage[1]
                        $("#moduloss").val(uno + ", " + dos);

                    }
                    $("#moduloss").val()
                } else if(selectedLanguage.length == 3){
                    for(i in selectedLanguage){
                        var uno = selectedLanguage[0]
                        var dos = selectedLanguage[1]
                        var tres = selectedLanguage[2]
                        $("#moduloss").val(uno + ", " + dos+ ", " + tres);

                    }
                    
                } else{
                    $("#moduloss").val("Selección no valida")
                };

            
            var soles = "S/."
            $("#metodos").val(radio_selected);

            if (radio_selected == "Efectivo"){
                $("#descuento").text("Descuento del 10%")
                $("#total").val(monto_leng - (monto_leng*0.10));
            } else {
                $("#total").val(monto_leng);
            }


        }

        
        
        
    </script>
    
</html>